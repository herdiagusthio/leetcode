package main

import "testing"

func TestIsValidExamples(t *testing.T) {
	tests := []struct {
		s    string
		want bool
	}{
		{"()", true},
		{"()[]{}", true},
		{"(]", false},
		{"([])", true},
		{"([)]", false},
		{"", true},
		{"(((((", false},
		{"])", false},
		// Additional edge cases
		{"(((((((((())))))))))", true},                                                                                                                                 // long valid nested
		{"(((((((((()))))))))))", false},                                                                                                                               // long, one extra close
		{"(((((((((()))))))))", false},                                                                                                                                 // long, one missing close
		{"[[[[[[[[[[[[[[[[[[[]]]]]]]]]]]]]]]]]]]", true},                                                                                                               // long, one type
		{"[[[[[[[[[[[[[[[[[[[]]]]]]]]]]]]]]]]]]]]", false},                                                                                                             // long, one extra close
		{"{[()]}{[()]}{[()]}{[()]}{[()]}{[()]}{[()]}{[()]}{[()]}{[()]}", true},                                                                                         // repeated valid blocks
		{"{[()]}}", false},                                                                                                                                             // extra close at end
		{"(((((((((((((}}}}}}}}}}}", false},                                                                                                                            // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}", false},                                                                                                                            // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}", false},                                                                                                                           // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}", false},                                                                                                                         // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}", false},                                                                                                                       // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}", false},                                                                                                                     // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}", false},                                                                                                                   // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                                                 // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                                               // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                                             // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                                           // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                                         // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                                       // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                                     // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                                   // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                                 // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                               // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                             // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                           // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                         // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                       // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                     // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                   // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                                 // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                               // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                             // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                           // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                         // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                       // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                     // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                   // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                                 // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                               // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                             // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                           // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                         // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                       // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                     // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                   // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                                 // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                               // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                             // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                           // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                         // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                       // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                     // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                   // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                                 // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                               // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                             // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                           // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                         // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                         // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                       // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                     // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                   // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},                 // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},               // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},             // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},           // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},         // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},       // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},     // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false},   // all opens then all closes, mismatched
		{"(((((((((((((}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}", false}, // all opens then all closes, mismatched
		// Alternating brackets
		{"()()()()()", true},
		{"(((((())))))", true},
		{"((()())())", true},
		{"((()())()", false},
		{"((()())()))", false},
		{"[({})]", true},
		{"[({)}]", false},
		{"[", false},
		{"]", false},
		{"{", false},
		{"}", false},
		{"[[]", false},
		{"[]]", false},
		{"[[]]", true},
		{"[[][[]]]", true},
		{"[[][[]]", false},
		{"[[][[]]]]", false},
	}
	for _, tc := range tests {
		if got := isValid(tc.s); got != tc.want {
			t.Fatalf("s=%q got=%v want=%v", tc.s, got, tc.want)
		}
	}
}
